{% extends "base.html" %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
<div style="display: flex; gap: 10px; margin-bottom: 20px;">
    <!-- –ö–Ω–æ–ø–∫–∞ –ù–∞—á–∞—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—é -->
    <form action="/inventory/start" method="post">
        <button type="submit" style="padding: 8px 16px; background: #29a888; color: white; border: none; border-radius: 4px;">
            –ù–∞—á–∞—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—é
        </button>
    </form>

    <!-- –ö–Ω–æ–ø–∫–∞ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏ -->
    <form action="/inventory/" method="get">
        <button type="submit" style="padding: 8px 16px; background: #46d2af; color: white; border: none; border-radius: 4px;">
            –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏
        </button>
    </form>

    <form action="/inventory/report" method="get" style="display:inline-block;">
    <button type="submit" style="padding: 8px 16px; background: #46ddc4; color: white; border: none; border-radius: 4px;">–°–∫–ª–∞–¥—Å–∫–æ–π –æ—Ç—á–µ—Ç</button>
    </form>
</div>


<h2>–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</h2>

<p><strong>–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–µ:</strong> {{ total_cost }} ‚ÇΩ</p>

<div class="search-bar">
    <form method="get" action="/home">
        <div class="search-input-group">
            <input type="text" name="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é" value="{{ search or '' }}">
            <select name="category_id">
                <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                {% for cat in categories %}
                    <option value="{{ cat.id }}" {% if selected_category == cat.id %}selected{% endif %}>{{ cat.name }}</option>
                {% endfor %}
            </select>
            <button type="submit" class="btn-search">üîç –ù–∞–π—Ç–∏</button>
        </div>
    </form>
</div>


<div class="cards-container">
    {% for item in items %}
    <div class="item-card">
        <h3>{{ item.name }}</h3>
        <p>{{ item.description }}</p>
        <p><strong>–¶–µ–Ω–∞:</strong> {{ item.price }} ‚ÇΩ</p>
        <p><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</strong> {{ item.quantity }}</p>
        <p><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> {{ item.category.name if item.category else "-" }}</p>
        <div class="card-buttons">
            <a href="/items/{{ item.id }}/qr_page" class="btn qr">QR-–∫–æ–¥</a>
            <a href="/items/edit/{{ item.id }}" class="btn edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
            <form method="post" action="/items/delete/{{ item.id }}" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å?');">
                <button type="submit" class="btn delete">üóë –£–¥–∞–ª–∏—Ç—å</button>
            </form>
    </div>
</div>

    {% else %}
    <div class="card">
        <p>–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>
    </div>
    {% endfor %}
</div>

<style>
.search-bar {
    margin-bottom: 20px;
}

.search-input-group {
    display: flex;
    gap: 10px;
    align-items: center;
}

.search-input-group input[type="text"] {
    flex: 1;               /* —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ–µ –º–µ—Å—Ç–æ */
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.search-input-group select {
    max-width: 200px;       /* –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —à–∏—Ä–∏–Ω—É */
    white-space: nowrap;    /* –¥–ª–∏–Ω–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É */
    overflow: hidden;       /* —Å–∫—Ä—ã–≤–∞–µ–º –ª–∏—à–Ω–µ–µ */
    text-overflow: ellipsis; /* —Ç—Ä–æ–µ—Ç–æ—á–∏–µ –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π */
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    background-color: #fff;
}

.search-input-group .btn-search {
    padding: 8px 12px;
    background-color: <div id="29a888"></div>;  /* —á–µ—Ä–Ω–∞—è –∫–Ω–æ–ø–∫–∞ */
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.search-input-group .btn-search:hover {
    background-color: #555;
}
</style>
{% endblock %}
