{% extends "base.html" %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
<h2>–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</h2>

<div class="search-bar">
    <form method="get" action="/">
        <div class="search-input-group">
            <input type="text" name="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é" value="{{ search or '' }}">
            <select name="category_id">
                <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                {% for cat in categories %}
                    <option value="{{ cat.id }}" {% if selected_category == cat.id %}selected{% endif %}>{{ cat.name }}</option>
                {% endfor %}
            </select>
            <button type="submit" class="btn-search">üîç –ù–∞–π—Ç–∏</button>
        </div>
    </form>
</div>

<div class="cards-container">
    {% for item in items %}
    <div class="item-card">
        <h3>{{ item.name }}</h3>
        <p>{{ item.description }}</p>
        <p><strong>–¶–µ–Ω–∞:</strong> {{ item.price }} ‚ÇΩ</p>
        <p><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</strong> {{ item.quantity }}</p>
        <p><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> {{ item.category.name if item.category else "-" }}</p>
        <div class="card-buttons">
            <a href="/items/edit/{{ item.id }}" class="btn edit">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
            <form method="post" action="/items/delete/{{ item.id }}" onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä?');">
                <button type="submit" class="btn delete">üóë –£–¥–∞–ª–∏—Ç—å</button>
            </form>
        </div>
    </div>
    {% else %}
    <div class="card">
        <p>–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>
    </div>
    {% endfor %}
</div>
{% endblock %}
